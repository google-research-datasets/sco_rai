,A,B,C,D,E,F
1,~~~ Paper Details ~~~~, , , , ,
2,bibliographicCitation,"{marian2023, author = {Marian, Amelie}, title = {Algorithmic Transparency and Accountability through Crowdsourcing: A Study of the NYC School Admission Lottery}, year = {2023}}", , , ,
3,~~~ Annotator Details ~~~~, , , , ,
4,identifier,dk, , , ,
5,role,annotator,DO NOT CHANGE, , ,
6,generatedAtTime,2023-12-13, , , ,
7,~~~ Class Instance / Individual Annotations starts below ~~~~, , , , ,
8,individualName,type,sourceExcerpt,sourcePageNumber,sourceExtractedDescription,
9,NYCSchools,Agent,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,NYC middle- and high-school admissions,
10,Students,Agent,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,students,
11,MatchingAlgorithm,Agent,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match.,
12,Criticism,Perceived_Problem,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools ,
13,WeightedSumFunction,Strategy,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"ranking students using a weighted-sum function of their grades, state test scores, and absence",
14,Complicatedness,Perceived_Problem,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,school choice systems are often complicated to navigate for families,
15,LotteryBasedApproach,Strategy,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and audition,
16,LackOfUnderstanding,Perceived_Need,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"were not aware of the changes, or did not understand their impacts,",
17,WithholdingInformation,Strategy,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"declined to provide families with any information on their lottery numbers, or much details about the process.",
18,AssumptionOfNonUnderstanding,Causal_Theory,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe families‚Äî could not understand!,
19,DesireForFairness,Goal,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly.,
20,PerceptionOfBias,Causal_Theory,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match",
21,LotteryNumberKnowledge,Perceived_Need,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,Knowing their lottery numbers allows,
22,MatchingAlgorithm,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match.,
23,StudentRanking,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"rank students based on some desired criteria (academic,geographic, demographic)",
24,SchoolPreference,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,list schools in order of preference,
25,FinalRankings,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"handled by a clearinghouse and designed to optimize some notion of utility, produces the rankings",
26,Families,Agent,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,families,
27,LotteryNumbers,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,Each student is assigned a single random lottery number that is used to determine their admission priority ,
28,LackOfPlacement,Artifact,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-9,"resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years",
29, , , , , ,
30, , , , , ,
31, , , , , ,
32, , , , , ,
33,~~~ Property / Axiom / Triple Annotations starts below ~~~~, , , , ,
34,annotatedSource,annotatedProperty,annotatedTarget,sourceExcerpt,sourcePageNumber,sourceExtractedDescription
35,NYCSchools,hasProducedArtifact,MatchingAlgorithm,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match.
36,NYCSchools,hasProducedArtifact,StudentRanking,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"the schools rank students based on some desired criteria (academic,geographic, demographic)"
37,Students,hasProducedArtifact,SchoolPreference,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,the students list schools in order of preference
38,MatchingAlgorithm,hasProducedArtifact,FinalRankings,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rankings"
39,Criticism,constrainsAgent,NYCSchools,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools
40,WeightedSumFunction,constrainsAgent,NYCSchools,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences"
41,Complicatedness,constrainsAgent,Families,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools."
42,LotteryBasedApproach,constrainsAgent,NYCSchools,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7].
43,LackOfPlacement,reflectsPrecept,LotteryBasedApproach,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years"
44,LackOfUnderstanding,constrainsAgent,Families,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"that families, who often were not aware of the changes, or did not understand their impacts"
45,NYCSchools,hasProducedArtifact,LotteryNumbers,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries
46,WithholdingInformation,constrainsAgent,NYCSchools,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"the DOE declined to provide families with any information on their lottery numbers, or much details about the process. "
47,AssumptionOfNonUnderstanding,constrainsAgent,NYCSchools,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe families‚Äî could not understand!"
48,DesireForFairness,constrainsAgent,Families,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly.
49,PerceptionOfBias,constrainsAgent,Families,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,"The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match."
50,LotteryNumberKnowledge,constrainsAgent,Families,"NYC middle- and high-school admissions use a matching algorithm [1] similar to the stable marriage algorithm designed by Gale and Shapley [16] and used for the medical school residency match. The NYC school matching process consists of three parts: the schools rank students based on some desired criteria (academic,geographic, demographic), the students list schools in order of preference, and the matching algorithm, handled by a clearinghouse and designed to optimize some notion of utility, produces the rank-ings. The NYC school matching algorithm is designed to optimize students' choices while guaranteeing stable matches. An important property of the matching is its strategy-proofness (on the students side) so that the best strategy for families is always to list their choices in their true order of preference.In NYC, the matching algorithm factors in various policy choices and admission priorities, such as set-asides for low-income students,geographic priorities, seats reserved for students who qualify for special education services, or priorities for continuing students or their siblings. The school rankings of students have considered these priorities as well as some measures of the academic or artistic preparation of students. This ‚Äúscreening‚Äù of students has been a source of strong criticism due to the belief that it leads to a lack of diversity in the city schools [19]. Typically, schools were ranking students using a weighted-sum function of their grades, state test scores, and absences. However, the actual ranking functions used by the schools were often coarse and would lead to unintended outcomes [15]; some schools for instance ended up, unknowingly, basing most of their rankings on the number of days a student was absent or late, disproportionally penalizing students for illnesses. In addition, school choice systems are often complicated to navigate for families [27]. As a result, minority families often do not apply to selective schools, leading to disproportionate representation in popular schools. In addition, school principals do not understand the implications of their school admission criteria on class composition,making the system clearer and more transparent would increase equity [10].2.2 Admission and policy changesSeveral changes to middle- and high-school admissions were im-plemented starting in the 2021 admission season. Because of the COVID-19 pandemic, 2020 state tests were canceled and many schools did not assign grades. This led the NYC Department of Education (DOE) to move to a lottery-based approach for admissions to all middle schools and some selective high schools that were previ-ously using academic screens and auditions [7]. In addition, several equity-motivated modifications to the process were included, such as the removal of some geographic admission priorities, and the addition of set-asides for low-income students in many popular schools.Algorithms are fickle; a seemingly small change to a process can trigger unanticipated changes in the outcome of the algorithm. The Changes in admission policies meant that the odds of admissions at several popular schools were significantly different from what they had been in the past. Unfortunately, the changes, and their impacts on the chances of admissions at different schools, were not communicated well by the DOE. This meant that families, who often were not aware of the changes, or did not understand their im-pacts, were basing their ranked choice decisions on expected match outcomes from the past. This resulted in a large increase in the number of applicants not getting any of their 12 choices. In 2021, 7% of high school applicants (close to 5,000 students) were unmatched citywide, with up to 18% of students in a Manhattan district, a 125%increase compared to previous years (information received via anNYS Freedom of Information Law request), unmatched student data for the 2022 admission cycle was similar [11]. [...] Each student is assigned a single random lottery number that is used to determine their admission priority for schools that admit their students through total or partial lotteries, and to break ties for schools that admit their students through priority groupings,or batches, if there are more students in a batch desiring to gain admission than there are available seats at the school for that batch.The decision to use the same lottery number for all the schools,rather than having a separate lottery number for each school, is one that often puzzles and infuriates parents who believe the system is unfair to students with an unlucky draw and that students would have a better chance if they could draw one number per school. Infact, the literature shows that using the same number for all schools does not penalize students [4, 26], instead, it slightly increases their chances of matching to their top choice [2]. In a single number system, students with a good lottery number are more likely to be assigned to their preferred school, but if schools hold separate lotteries, to get their top school, students have to receive a (lower odds) good lottery number at their preferred school. The chances of not getting an offer are roughly the same. Incredibly, at first, the DOE declined to provide families with any information on their lottery numbers, or much details about the process. The DOE first told parents that the numbers were ‚Äútrulyrandom,‚Äù but could not be shared with families because they con-sisted of long strings of numbers and letters that they ‚Äîthe fami-lies‚Äî could not understand! In addition, the DOE claimed that the numbers would not give information to families as to their relative chances in their preferred schools, as these chances depend on the choices of other applicants. Students were receiving school assign-ments, largely based on the results of an opaque lottery process using a randomly-generated number that they, or their families,had no way to access for verification or transparency.A parent group had to launch a campaign asking parents to request their student‚Äôs lottery numbers[22] under New York State‚ÄôsFreedom of Information Law (FOIL)1 ‚Äîparents are legally entitled to see any information that is used to decide their child‚Äôs admission to public schools‚Äî for the DOE to finally relent and agree to provide the lottery numbers, at first upon email request after the results of the Spring 2021 match. As the demand from parents increased in the subsequent admission season, the lottery number was made available to all middle- and high-school students on the DOE admis-sion portal before applications were due, a win for transparency and as we will see below, an important piece of information to help families navigate the process. When the DOE finally provided families with their random number,it did so with scant contextual information. Most received, without additional information, a lottery number that looked like this:6ba829b3-fa99-4752-a931-2119fb0c1feaWhile this is indeed a ""long string of numbers and letters"" as described by the DOE, it is not so complicated that parents couldn't understand it. Anyone with a computer science background will easily recognize the string as a 32-characters hexadecimal number. Most families are not familiar with hexadecimal numbers, but they are quite easy to explain: hexadecimals are base 16 numbers (they use digits 0‚Äì9, then a-f) that are often used in programming because computers encode everything in binary (bits are base 2: 0 or 1), and16 is a power of 2. A hexadecimal character can be represented in 4 bits.We can only guess why the lottery numbers are encoded as long hexadecimals; the DOE has declined to provide more information on the choice. However, a longer glance at the numbers shows that they are in a format called UUID (Universally Unique Identifiers), Version 1 New York State‚Äôs Freedom of Information Law (FOIL) is similar to the Federal Freedom Of Information Act (FOIA).4 (the version can be identified by looking at the first character of the third block of characters ‚Äî the 13th character). UUID4 are used to generate random unique identifiers, it makes sense for the programmers of the NYC DOE lottery to have used an existing ‚Äîand well-tested ‚Äî random number generator library function that creates uniformly distributed UUID V4 numbers.Once the format of the lottery numbers was clear, understand-ing how they were processed was the next step. Once again the DOE at first declined to provide such information, but using the crowdsourced data from the 2021 admission cycle (see Section 4), it was possible to conclude that the UUID numbers were sorted lexicographically: the numbers are compared left to right, in in-creasing order, from 0 to f (0‚Äì9 then a-f). This means that the first character is enough to give a rough idea of how good a number is: a lottery number that starts with 0 is in the first 1/16ùë°‚Ñé (6.25%),one that starts with f in the last 1/16ùë°‚Ñé . To differentiate further, wecan look at the first two characters: a lottery number that starts with ‚Äò00‚Äô is in the first 256th (0.4%), ‚Äò01‚Äô in the 2nd 256th, and soon. The first two characters are sufficient to identify where your number is expected to stand in comparison to other numbers, with a 0.4% precision. Note that these are the theoretical percentiles, i.e.,the expected percentile based on a uniform distribution of random numbers.The DOE has declined to provide applicants with percentile information about their lottery numbers, stating: ‚ÄúUntil the application has closed and we know the full pool of applicants, the relative rank of this lottery num-ber cannot be calculated.""This is technically correct. The random numbers are drawn from uniform distribution and random samples may differ from the expected values. However, sample percentiles are known to be asymptotically normally distributed around theoretical percentiles,with the variance depending on the sample size [29]. For large samples (such as lottery numbers for all applicants to high- or middle-schools), this means the sample percentiles will be very close to that of the theoretical distribution given above, as shown inFigure 1a, which represents the distribution of the first two charac-ters for a simulation over 1,000 samples of 60,000 lottery numbers(similar to a citywide cohort of high- or middle-school applicants).To illustrate how the empirical distribution of lottery numbers may differ from the theoretical one, I report on the simulation of 1,000 samples for 4 different sample sizes: 60,000, 2,500, 600, and 100,and plotted the theoretical percentiles (black line), median sample percentile (dark blue line), 10‚Äì90 percentile range of sample per-centiles (where 80% of sample percentiles will fall, in medium blue),and the full range of observed sample percentiles (in light blue)in Figure 1. The x-axis represents the first two characters of the lottery numbers, and the y-axis is the observed percent of lottery numbers that are similar or better in the simulated sample.The sample sizes were chosen to represent various comparison groups: 60,000 for a cohort of citywide students (there are typically between 60,000 and 80,000 students in each grade cohort), 2,500represents a large sample of applicants (e.g., all applicants from a district, or to a high-demand high school ‚Äî some high schools have more than 5,000 applicants), 600 and 100 represent medium and small samples of applicants (e.g., average- or low- demand high- or middle-school). As discussed above, the sample percentiles for the 60,000 sample (Figure 1a) track very closely with the theoretical percentiles. With a sample size that is not as large, 2,500 numbers(Figure 1b) we start seeing some variations, but the actual percentile will be within 1% of the theoretical percentage 80% of the time(medium blue ribbon). Smaller sample sizes will have more variance(Figure 1c). In those cases, the percentiles given above are more approximate, but can still give you a good idea of where a lottery number stands compared to others. For instance, for a school with600 applicants, a lottery number starting with ‚Äò3a‚Äô is expected to bein the 23rd percentile. In over 1,000 simulations, that lottery number fell between the 21st and 25th percentile 80% of the time, but in some extremely skewed cases could present in the 18th or 28th percentile. Finally, the distribution of small sample percentiles is obviously more skewed as more variations are possible. This is due to large variability in small samples, and can be shown in Figure 1d.This means that a lottery number will have more variability in how it compares to that of other applicants in a school with a small number of applicants. However, this is unlikely to have much impact as schools with low numbers of applicants typically are not selective.Figure 1d also illustrates how families can easily come to distrust the process. Parents often believe that the system is rigged because they know a group of applicants with unusually bad (or good)lottery numbers, as small samples are known to be likely to have outlier results according to the Law of Small Numbers [31].The truth is that families don‚Äôt care much about the actual numbers or even the exact percentile where it falls; rather they want an idea of their student‚Äôs chances and guarantees that the numbers were generated fairly. The 32-character numbers look unnecessarily complex; most of the characters are just noise and have no impact on the student‚Äôs admission outcome, only the first characters willever be used to compare students in the same cohort. The use of overly long and opaque numbers are raising more questions than they answer: parents on internet boards are convinced that the DOE is tipping the scales by favoring students from some schools,or demographics, over others; that the numbers are encoding all type of information used in the match. They use anecdotal data to confirm their fears. The lack of transparency is the main cause of mistrust.For a decision process to be transparent and accountable, it needs to be simply explainable. If the DOE had clearly stated how the numbers were generated (maybe sharing which library function is used) and explained how the numbers are processed from the beginning, families would have more trust in the system. It seems counter-intuitive to advocate for lottery numbers to be released before the results of the school match are given to families. A lottery seems fair at face value, couldn‚Äôt families just wait for the outcome, and possibly get their lottery number then? Wouldn't Knowing the lottery number in advance create wrong incentives and undesirable strategic behavior? Can families just list the schools in which they are interested in their true order of preference and see how things pan out? The NYC school admission matching process is not a pure lottery:families are ranking their choices and admission priorities are in place. While the original stable matching algorithm was designed to be strategy-proof [16], the NYC School matching algorithm itself is not completely strategy-proof [1, 2]. Because the number of schools student can rank is limited to 12, there is a possibility that a suboptimal selection of 12 schools could result in a student not being matched to any of their choices (in which case the DOE assign them to a school with available seats after the match). While the best strategy is always to order the 12 schools in a student‚Äôs ranked list in their true order of preference, there is some strategizing when it comes to deciding which schools to include in the list of 12 choices. As the changes in admissions that started in 2021 have made lot-tery numbers the primary factor for admissions to middle-school and most high-schools, knowing the lottery number in advance of the application becomes important for several reasons:‚Ä¢ Researching schools is time- and resource-consuming. Parents and students have to attend numerous open houses, learn about the course offerings of the different schools, understand the schools‚Äô admission priorities, figure out if the school requires additional admission material (auditions,essays), for at least 12 schools, likely more, to build their list of 12 choices. On the school side, hosting multiple open houses requires a significant time investment from school staff. Some popular schools have been known to host several tours for only a handful of seats available for non-continuing students. Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.‚Ä¢ Being unmatched is to be avoided as much as possible.As discussed in Section 2.2, a large number of high-school applicants were left without a match in 2021 and 2022 [11].Such outcomes are devastating for families: students who do not have another high-school placement (e.g., Specialized‚Äìor magnet‚Äì HS) are assigned by the DOE to a school that rarely matches their expectations. In fact, the DOE‚Äôs strategy to assign unmatched students to schools has created many is-sues: students being assigned to career and technical school for professions in which they had no interest, hearing stu-dents with no ties to the deaf community being assigned to an ASL school,...‚Ä¢ Managing expectations. Lastly, and perhaps more impor-tantly, we are talking about children and teenagers on whom the process can be extremely stressful. Receiving the news that you did not match to a school that you had your heart seton while your friends did, or worst that you did not get anymatch, can be hard, especially for middle-school applicants who are only 10 or 11 years old; knowing the lottery num-bers in advance can help parents steer their children‚Äôs hope towards schools to which they have a reasonable chance of getting matched.",435-8,Knowing their lottery numbers allows families to focus on likely matches and not waste time researching and comparing highly-selective schools if their random number is unlikely to give them access to these schools.
