,A,B,C,D,E,F
1,~~~ Paper Details ~~~~, , , , ,
2,bibliographicCitation,"{silva2023, author = {Silva, Pedro and Juneja, Bhawna and Desai, Shloka and Singh, Ashudeep and Fawaz, Nadia}, title = {Representation Online Matters: Practical End-to-End Diversification in Search and Recommender Systems}, year = {2023}}", , , ,
3,~~~ Annotator Details ~~~~, , , , ,
4,identifier,dk, , , ,
5,role,annotator,DO NOT CHANGE, , ,
6,generatedAtTime,2023-12-13, , , ,
7,~~~ Class Instance / Individual Annotations starts below ~~~~, , , , ,
8,individualName,type,sourceExcerpt,sourcePageNumber,sourceExtractedDescription,
9,DesireForRepresentation,Perceived_Problem,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",a desire to feel represented in the content,
10,Pinterest,Agent,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",Pinterest [...] we,
11,RRWithScoreThreshold,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",RR with a score threshold for queries in the beauty and fashion categories ,
12,StrongOrLogic,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",Strong-ORlogic,
13,Users,Agent,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",users,
14,DiversificationMechanisms,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content",
15,DesireToDiversifySkinTones,Goal,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",in order to diversify search results with respect to skin tones,
16,DesireForDiversityInRetrievalStage,Goal,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",To diversify in the retrieval stage,
17,DiversityInSkinToneRepresentation,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with,
18,BucketedANNRetrieval,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",Bucketed-ANN Retrieval,
19,OverfetchAndRerank,Artifact,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",Overfetch-and-Rerank,
20, , , , , ,
21, , , , , ,
22,~~~ Property / Axiom / Triple Annotations starts below ~~~~, , , , ,
23,annotatedSource,annotatedProperty,annotatedTarget,sourceExcerpt,sourcePageNumber,sourceExtractedDescription
24,DesireForRepresentation,constrainsAgent,Users,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",users often express a desire to feel represented in the content
25,Pinterest,hasProducedArtifact,DiversificationMechanisms,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content"
26,Pinterest,hasProducedArtifact,RRWithScoreThreshold,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020."
27,RRWithScoreThreshold,reflectsPrecept,DesireToDiversifySkinTones,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020."
28,Pinterest,hasProducedArtifact,StrongOrLogic,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved."
29,StrongOrLogic,reflectsPrecept,DesireForDiversityInRetrievalStage,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved."
30,Pinterest,hasProducedArtifact,DiversityInSkinToneRepresentation,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with"
31,Pinterest,hasProducedArtifact,BucketedANNRetrieval,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4","To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set."
32,Pinterest,hasProducedArtifact,OverfetchAndRerank,"As the use of online platforms continues to grow across all demo-graphics, users often express a desire to feel represented in the content. To improve representation in search results and recom-mendations, we introduce end-to-end diversification, ensuring that diverse content flows throughout the various stages of these sys-tems, from retrieval to ranking. We develop, experiment, and deploy scalable diversification mechanisms in multiple production surfaces on the Pinterest platform, including Search, Related Products, andNew User Home Feed, to improve the representation of different skin tones in beauty and fashion content. Diversification in production systems includes three components: identifying requests that will trigger diversification, ensuring diverse content is retrieved from the large content corpus during the retrieval stage, and finally, balancing the diversity-utility trade-of in a self-adjusting mannerin the ranking stage. Our approaches, which evolved from usingStrong-OR logical operator to bucketed retrieval at the retrieval stage and from greedy re-rankers to multi-objective optimization using determinantal point processes for the ranking stage, balanced diversity and utility while enabling fast iterations and scalable expansion to diversification over multiple dimensions. Our experi-ments indicate that these approaches significantly improve diversity metrics, with a neutral to a positive impact on utility metrics and improved user satisfaction, both qualitatively and quantitatively, in production. [...] To study the impact of diversification on business metrics, includ-ing user engagement, and the impact on the diversity metric, we ran several A/B experiments on three surfaces on the Pinterest App: Search (for fashion and beauty-related queries), Related Prod-ucts (for fashion Pin recommendations), and New User Home Feed(fashion and beauty category Pins).There are several nuances that must be taken into consideration when measuring the success and implications of these approaches in search and recommender systems. First, appropriate metrics and guardrails must be set in place before performing diversifcation. Second, while some of the learnings are transferable between surfaces, each surface presents unique challenges and may differ drastically from past use cases. The differences between surfaces encompass but are not limited to active users, Pin corpora, business metrics, and surface goals. Because of these factors, comparing the change in the diversity metric between surfaces is a moot point seven the data used in each surface is often different and sometimes disjoint. Nonetheless, we often observed positive gains in diversity metrics coupled with neutral or positive impact in guardrail business metrics for all the techniques described in this paper. It is also worth noting that not all surfaces require the same types of interventions so techniques described in earlier sections were applied to surfaces when appropriate.The metrics reported in this paper are the result of several A/B Experiments we ran in production for at least 3 weeks in the USas well as international markets. The number of users varies per surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically signi cant with p-value < 0.05. surface, Search and Related Products both had a few million users per experiment group, while New User Homefeed had hundreds of thousands of users per group. In the rest of this section, we give a brief overview of the impact of these techniques on user engagement metrics and the diversity metric (Div@ùêÄ (ùêÄ)) (we provide more details on the choice of ùêÄ in Appendix A.4). We report the impact to these metrics as the percentage difference relative to control. Any impact on engagement metrics reported below was statistically significant with p-value < 0.05.7.1 Search in order to diversify search results with respect to skin tones, we fest adopted RR with a score threshold for queries in the beauty and fashion categories in an A/B experiment that ran for five weeks in October 2020. This approach led to a 250% increase in the diver-sity metric and had a positive impact on engagement. We further iterated on the ranking stage by replacing RR with DPP in an experiment that ran for three weeks in April 2021, which resulted in a minor impact on the diversity metric while improving engagement and user growth metrics. The DPP approach was also launched in some international markets where we saw a similar trend in metrics, with gains in the diversity metric ranging from 200% to400% for different countries, with respect to the non-diversified baseline. We also observed an improvement in daily active users(number of users who made at least one request to Pinterest from any device), weekly active users (derived from daily active users by looking at action type for at least 7 days), and overall time spent on the platform.To diversify in the retrieval stage, we deployed the Strong-ORlogic to improve the diversity of the Pins retrieved. The experiment was run for a period of four weeks in August 2022. Adding this retrieval logic along with existing DPP at ranking resulted in an additional 14% increase in the diversity metric as well as a positive impact on search engagement. Figure 6 shows a visual comparison of search results before and after diversification.[...] n Related Products, after assessing the various cases and Pin cate-gories where it would be appropriate to start deploying diversif-cation, we introduced diversification in the ranking and retrieval stages for fashion and wedding-related Pins. For ranking stage diversification, we initially ran an A/B experiment with RR to diver-sify results post-ranking for the treatment group. This experiment was run for a period of ten weeks between September and Novem-ber 2020. We observed a 270% improvement in the diversity metricDiv@ùêÄ = 10(ùêÄ) and a neutral impact on relevance and engagement for the treatment group compared to the control group. With the increase in diversity in the top-ranked recommendations, we observed that the diversity also increased in terms of the skin tone distribution of the Pins that users engaged with. This experiment led to a successful launch of RR to all users viewing the fashion and wedding Pins.To better balance ranking scores and diversity, we conducted another A/B experiment comparing RR (as control) to DPP (as treat-ment) for a period of four weeks during March and April 2022. SinceDPP tries to balance utility scores of the Pins with diversity as com-pared to RR that reorders Pins only on the basis of the diversity dimension, as expected, the treatment group saw a small decrease in the diversity metric Div@ùêÄ = 10(ùêÄ), while some shopping metrics like the proportion of users with purchases increased by 1.3%,and engagement metrics - such as clicks, long-clicks and saves -increased by more than 5%. At the end of the experiment, DPP was deployed to all users as part of the default Related Products experience.To introduce diversification at the retrieval stage, we imple-mented the Bucketed-ANN Retrieval techniques to enhance the diversity of the retrieved set. In an experiment (that ran for 11 weeks between December 2022 and March 2023), Bucketed-ANN Retrieval led to an increase in the diversity metric (of the entire candidate set) by 8% at the retrieval stage for the nearest neighbor search in a Pin embedding space, while the relative increase in the diversity metric was about 1%. The relatively small increase due to retrieval diversification means that more work is needed to tune the hyperparameters at the ranking stage with respect to the diverse retrieval set.Prior to each launch, as outlined in Section 6.3, we conducted qualitative evaluations to compare the relevance of top-ranked recommendations and observed no significant changes in relevant or recommendation quality. Figure 1 shows a visual comparison of Related Products results before and after DPP-based ranking combined with Bucketed-ANN Retrieval-based diversification. We introduced diversification as part of the new user experience so that everyone feels represented from their first interaction with the platform. We initially developed a two-dimensional RR variation, which prioritized Pin category diversity using a category RR and achieved best-effort skin tone diversity using a priority queue. Leveraging a frequency-based skin tone priority queue, it greedily selected the next Pin at each step in the re-ranking, so that skin tone ranges with lower frequency across topics were given higher priority. In an A/B experiment run over six weeks in April to June of 2021, we deployed this approach for a subset of skin tone-related categories within the beauty and fashion categories. The skin tone diversity metric increased 109% with a neutral impact on Pin category diversity, engagement, and growth metrics. Iterations on our ranking system led us to replace the two-dimensional RR with a single skin tone based RR in the ranking stage, that operated over all Pins with a skin tone range across categories. This experiment that ran for four weeks in September 2021 led to a 650% improvement in the diversity metric as compared to the non-diversified experience with a neutral impact on engagement. Finally, we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022, which increased the skin tone diversity metric by 63%, with a neutral impact on latency. In the latest deployment, DPP diversification was introduced in the ranking stage (the experiment was run for four weeks in November 2022), leading to a 462% increase in the diversity metric due to retrieval diversity alone. Ultimately, the combination of DPP and Overfetch-and-Rerank achieved the best balance in terms of diversification and utility for New User Homefeed.","1735, 1772-4",we introduced diversification at the retrieval stage using Overfetch-and-Rerank in an experiment that ran for four weeks in March 2022
